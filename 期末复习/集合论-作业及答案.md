# 集合论综合练习题（修正版）
## T1
设集合 $ A = \{a, b, c\} $，关系 $ R = \{\langle a, b \rangle, \langle b, c \rangle, \langle c, a \rangle\} $，求 $ r(R) $（自反闭包）、$ s(R) $（对称闭包）、$ t(R) $（传递闭包）。

### 解答
1. **自反闭包 $ r(R) $**：自反闭包是在原关系基础上补充所有 $ \langle x, x \rangle $（$ x \in A $）的序偶，使关系满足自反性。
$ r(R) = R \cup \{\langle a, a \rangle, \langle b, b \rangle, \langle c, c \rangle\} = \{\langle a, b \rangle, \langle b, c \rangle, \langle c, a \rangle, \langle a, a \rangle, \langle b, b \rangle, \langle c, c \rangle\} $

2. **对称闭包 $ s(R) $**：对称闭包是在原关系基础上，若存在 $ \langle x, y \rangle $，则补充 $ \langle y, x \rangle $ 的序偶，使关系满足对称性。
$ s(R) = R \cup \{\langle b, a \rangle, \langle c, b \rangle, \langle a, c \rangle\} = \{\langle a, b \rangle, \langle b, a \rangle, \langle b, c \rangle, \langle c, b \rangle, \langle c, a \rangle, \langle a, c \rangle\} $

3. **传递闭包 $ t(R) $**：传递闭包是补充所有满足传递性的序偶，即若存在 $ \langle x, y \rangle $ 和 $ \langle y, z \rangle $，则补充 $ \langle x, z \rangle $。
- 由 $ \langle a, b \rangle $ 和 $ \langle b, c \rangle $ 得 $ \langle a, c \rangle $；
- 由 $ \langle b, c \rangle $ 和 $ \langle c, a \rangle $ 得 $ \langle b, a \rangle $；
- 由 $ \langle c, a \rangle $ 和 $ \langle a, b \rangle $ 得 $ \langle c, b \rangle $；
- 再由 $ \langle a, c \rangle $ 和 $ \langle c, a \rangle $ 得 $ \langle a, a \rangle $；
- 由 $ \langle b, a \rangle $ 和 $ \langle a, b \rangle $ 得 $ \langle b, b \rangle $；
- 由 $ \langle c, b \rangle $ 和 $ \langle b, c \rangle $ 得 $ \langle c, c \rangle $。

最终 $ t(R) = \{\langle a, a \rangle, \langle b, b \rangle, \langle c, c \rangle, \langle a, b \rangle, \langle b, c \rangle, \langle c, a \rangle, \langle a, c \rangle, \langle b, a \rangle, \langle c, b \rangle\} $

## T2
设集合 $ A = \{a, b, c, d\} $，关系 $ R = \{\langle a, b \rangle, \langle b, c \rangle, \langle c, d \rangle, \langle d, c \rangle, \langle a, a \rangle\} $，求 $ r(R) $、$ s(R) $ 和 $ t(R) $。

### 解答
1. **自反闭包 $ r(R) $**：补充 $ \langle b, b \rangle, \langle c, c \rangle, \langle d, d \rangle $，满足自反性。
$ r(R) = \{\langle a, b \rangle, \langle b, c \rangle, \langle c, d \rangle, \langle d, c \rangle, \langle a, a \rangle, \langle b, b \rangle, \langle c, c \rangle, \langle d, d \rangle\} $

2. **对称闭包 $ s(R) $**：补充 $ \langle b, a \rangle, \langle c, b \rangle, \langle d, c \rangle $（原已含 $ \langle d, c \rangle $），满足对称性。
$ s(R) = \{\langle a, b \rangle, \langle b, a \rangle, \langle b, c \rangle, \langle c, b \rangle, \langle c, d \rangle, \langle d, c \rangle, \langle a, a \rangle\} $

3. **传递闭包 $ t(R) $**：逐步补充传递序偶：
- 由 $ \langle a, b \rangle $ 和 $ \langle b, c \rangle $ 得 $ \langle a, c \rangle $；
- 由 $ \langle a, c \rangle $ 和 $ \langle c, d \rangle $ 得 $ \langle a, d \rangle $；
- 由 $ \langle b, c \rangle $ 和 $ \langle c, d \rangle $ 得 $ \langle b, d \rangle $；
- 由 $ \langle c, d \rangle $ 和 $ \langle d, c \rangle $ 得 $ \langle c, c \rangle $；
- 由 $ \langle d, c \rangle $ 和 $ \langle c, d \rangle $ 得 $ \langle d, d \rangle $；
- 其他传递组合无新增序偶。

最终 $ t(R) = \{\langle a, a \rangle, \langle a, b \rangle, \langle a, c \rangle, \langle a, d \rangle, \langle b, c \rangle, \langle b, d \rangle, \langle c, d \rangle, \langle d, c \rangle, \langle c, c \rangle, \langle d, d \rangle\} $

### 说明
关系的闭包求解核心是补充序偶以满足对应性质：
- 自反闭包：添加所有 $ \langle x, x \rangle $（$ x \in A $）；
- 对称闭包：若 $ \langle x, y \rangle \in R $ 且 $ x \neq y $，则添加 $ \langle y, x \rangle $；
- 传递闭包：若 $ \langle x, y \rangle \in R $ 且 $ \langle y, z \rangle \in R $，则添加 $ \langle x, z \rangle $，重复此过程至无新序偶可加。传递闭包对应“可达性”，如结点间的间接连通、逻辑推理的三段论等。

## T3
证明：将无向图中结点间的可达关系视作二元关系，则该关系为等价关系，并分析等价类的图论意义。

### 证明
设无向图 $ G = \langle V, E \rangle $，定义二元关系 $ R \subseteq V \times V $：对任意 $ u, v \in V $，$ \langle u, v \rangle \in R $ 当且仅当 $ u $ 与 $ v $ 可达（含自身可达）。需证明 $ R $ 满足自反性、对称性、传递性。

1. **自反性**：对任意 $ u \in V $，$ u $ 到自身存在长度为 0 的路径（平凡路径），故 $ \langle u, u \rangle \in R $，自反性成立。

2. **对称性**：若 $ \langle u, v \rangle \in R $，则 $ u $ 到 $ v $ 存在路径 $ u = v_0 \to v_1 \to \dots \to v_k = v $。无向图中路径可逆，故 $ v \to v_{k-1} \to \dots \to v_0 = u $ 是 $ v $ 到 $ u $ 的路径，即 $ \langle v, u \rangle \in R $，对称性成立。

3. **传递性**：若 $ \langle u, v \rangle \in R $ 且 $ \langle v, w \rangle \in R $，则 $ u $ 到 $ v $ 有路径 $ P_1 $，$ v $ 到 $ w $ 有路径 $ P_2 $。将 $ P_1 $ 与 $ P_2 $ 拼接得 $ u $ 到 $ w $ 的路径 $ P_1 \cup P_2 $，故 $ \langle u, w \rangle \in R $，传递性成立。

综上，$ R $ 是等价关系。

### 等价类的图论意义
等价关系 $ R $ 的每个等价类是无向图中的一个**连通分支**。即同一等价类中的结点两两可达，不同等价类中的结点无任何路径连通。等价类恰好划分了无向图的所有结点，对应连通分支的划分。

## T4
证明：代数系统间的同构关系是一种等价关系。

### 预备知识
设代数系统 $ \langle A, * \rangle $ 和 $ \langle B, \circ \rangle $，若存在双射 $ f: A \to B $，使得对任意 $ a_1, a_2 \in A $，有 $ f(a_1 * a_2) = f(a_1) \circ f(a_2) $，则称 $ \langle A, * \rangle $ 与 $ \langle B, \circ \rangle $ 同构，记为 $ \langle A, * \rangle \cong \langle B, \circ \rangle $。

### 证明
定义二元关系 $ R $：对任意代数系统 $ U, V $，$ \langle U, V \rangle \in R $ 当且仅当 $ U \cong V $。需证明 $ R $ 满足自反性、对称性、传递性。

1. **自反性**：对任意代数系统 $ U = \langle A, * \rangle $，取恒等映射 $ id_A: A \to A $（双射），对任意 $ a_1, a_2 \in A $，有 $ id_A(a_1 * a_2) = a_1 * a_2 = id_A(a_1) * id_A(a_2) $，故 $ U \cong U $，即 $ \langle U, U \rangle \in R $，自反性成立。

2. **对称性**：若 $ \langle U, V \rangle \in R $（即 $ U \cong V $），则存在同构映射 $ f: U \to V $。因 $ f $ 是双射，其逆映射 $ f^{-1}: V \to U $ 也是双射。对任意 $ b_1, b_2 \in V $，存在 $ a_1, a_2 \in A $ 使得 $ f(a_1) = b_1 $，$ f(a_2) = b_2 $，则：
$ f^{-1}(b_1 \circ b_2) = f^{-1}(f(a_1) \circ f(a_2)) = f^{-1}(f(a_1 * a_2)) = a_1 * a_2 = f^{-1}(b_1) * f^{-1}(b_2) $
故 $ f^{-1} $ 是同构映射，即 $ V \cong U $，$ \langle V, U \rangle \in R $，对称性成立。

3. **传递性**：若 $ \langle U, V \rangle \in R $ 且 $ \langle V, W \rangle \in R $（即 $ U \cong V $，$ V \cong W $），则存在同构映射 $ f: U \to V $，$ g: V \to W $。双射的复合 $ g \circ f: U \to W $ 仍是双射。对任意 $ a_1, a_2 \in A $：
$ (g \circ f)(a_1 * a_2) = g(f(a_1 * a_2)) = g(f(a_1) \circ f(a_2)) = g(f(a_1)) \star g(f(a_2)) = (g \circ f)(a_1) \star (g \circ f)(a_2) $
（其中 $ \star $ 是 $ W $ 上的运算），故 $ g \circ f $ 是同构映射，即 $ U \cong W $，$ \langle U, W \rangle \in R $，传递性成立。

综上，同构关系是等价关系。

## T5
证明：设有群 $ G $ 及其子群 $ H $，在 $ G $ 上定义二元关系 $ R $：对任意 $ a, b \in G $，$ \langle a, b \rangle \in R \iff ab^{-1} \in H $，则 $ R $ 是 $ G $ 上的等价关系。

### 证明
需证明 $ R $ 满足自反性、对称性、传递性（利用群和子群的性质）。

1. **自反性**：对任意 $ a \in G $，$ aa^{-1} = e $（$ e $ 是群 $ G $ 的单位元）。因 $ H $ 是子群，单位元 $ e \in H $，故 $ \langle a, a \rangle \in R $，自反性成立。

2. **对称性**：若 $ \langle a, b \rangle \in R $，则 $ ab^{-1} \in H $。因 $ H $ 是子群，对任意元素 $ x \in H $，其逆元 $ x^{-1} \in H $，故 $ (ab^{-1})^{-1} = ba^{-1} \in H $，即 $ \langle b, a \rangle \in R $，对称性成立。

3. **传递性**：若 $ \langle a, b \rangle \in R $ 且 $ \langle b, c \rangle \in R $，则 $ ab^{-1} \in H $，$ bc^{-1} \in H $。因 $ H $ 是子群，运算封闭，故 $ (ab^{-1})(bc^{-1}) = ac^{-1} \in H $，即 $ \langle a, c \rangle \in R $，传递性成立。

综上，$ R $ 是 $ G $ 上的等价关系。

## T6
证明：置换群 $ G $ 作用在集合 $ X $ 上，定义二元关系 $ R \subseteq X \times X $：对任意 $ a, b \in X $，$ \langle a, b \rangle \in R \iff \exists g \in G $ 使得 $ g(a) = b $，则 $ R $ 为等价关系。

### 预备知识
置换群 $ G $ 是集合 $ X $ 上所有双射（置换）构成的群，群运算为映射的复合；群作用满足：
- 单位元 $ e \in G $，对任意 $ x \in X $，$ e(x) = x $；
- 对任意 $ g_1, g_2 \in G $，$ x \in X $，$ (g_1 \circ g_2)(x) = g_1(g_2(x)) $。

### 证明
1. **自反性**：对任意 $ a \in X $，取单位元 $ e \in G $，由群作用性质得 $ e(a) = a $，故 $ \langle a, a \rangle \in R $，自反性成立。

2. **对称性**：若 $ \langle a, b \rangle \in R $，则存在 $ g \in G $ 使得 $ g(a) = b $。因 $ G $ 是置换群，$ g $ 是双射，其逆元 $ g^{-1} \in G $，且 $ g^{-1}(b) = g^{-1}(g(a)) = (g^{-1} \circ g)(a) = e(a) = a $，故 $ \langle b, a \rangle \in R $，对称性成立。

3. **传递性**：若 $ \langle a, b \rangle \in R $ 且 $ \langle b, c \rangle \in R $，则存在 $ g_1, g_2 \in G $ 使得 $ g_1(a) = b $，$ g_2(b) = c $。群运算封闭，故 $ g_2 \circ g_1 \in G $，且 $ (g_2 \circ g_1)(a) = g_2(g_1(a)) = g_2(b) = c $，故 $ \langle a, c \rangle \in R $，传递性成立。

综上，$ R $ 是等价关系。

### 说明
等价关系的证明核心是针对关系定义，逐一验证自反性、对称性、传递性，需结合具体场景（如图论、代数系统、群论）的定义和性质展开推导。

## T7
设集合 $ A = \{2, 3, 4, 6, 7, 12, 36, 60\} $，关系 $ R = \{\langle a, b \rangle \mid a, b \in A \text{ 且 } a \mid b\} $（$ a \mid b $ 表示 $ a $ 整除 $ b $），说明 $ R $ 为偏序关系，并作出偏序集 $ \langle A, \mid \rangle $ 的哈斯图。

### 解答
1. **证明 $ R $ 是偏序关系**：偏序关系需满足自反性、反对称性、传递性。
- **自反性**：对任意 $ a \in A $，$ a \mid a $（任何整数整除自身），故 $ \langle a, a \rangle \in R $，自反性成立。
- **反对称性**：若 $ \langle a, b \rangle \in R $ 且 $ \langle b, a \rangle \in R $，则 $ a \mid b $ 且 $ b \mid a $。因 $ a, b $ 是正整数，故 $ a = b $，反对称性成立。
- **传递性**：若 $ \langle a, b \rangle \in R $ 且 $ \langle b, c \rangle \in R $，则 $ a \mid b $ 且 $ b \mid c $。由整除的传递性，$ a \mid c $，故 $ \langle a, c \rangle \in R $，传递性成立。

综上，$ R $ 是偏序关系。

2. **绘制哈斯图**：哈斯图的绘制规则：
- 结点表示集合 $ A $ 中的元素；
- 若 $ a \mid b $ 且 $ a \neq b $，且不存在 $ c \in A $ 使得 $ a \mid c $ 且 $ c \mid b $（即 $ b $ 是 $ a $ 的直接后继），则用线段连接 $ a $ 和 $ b $，且 $ a $ 在下方，$ b $ 在上方；
- 省略自反边和传递边。

哈斯图结构（从上到下，同一层为不可比元素）：
- 顶层：60, 36（60 和 36 无整除关系）；
- 第二层：12（12 整除 60 和 36，且无中间元素）；
- 第三层：6, 4（6 整除 12 和 60；4 整除 12 和 60；6 和 4 不可比）；
- 第四层：2, 3（2 整除 4, 6, 12, 36, 60；3 整除 6, 12, 36, 60；2 和 3 不可比）；
- 底层：7（7 仅整除自身，与其他元素不可比）。

具体图形：
```
    60   36
     |    |
     12   |
    /  \  |
   6    4 |
  / \     |
 2   3    |
          |
     7
```
（注：36 直接连接 12，12 连接 6 和 4，6 连接 2 和 3，7 独立于其他分支）

## T8
设有一个作用在偏序集上的算法，功能为每一步删除一个当前偏序集中的极大元并记录删除顺序。将该算法应用在 T7 的偏序集 $ \langle A, \mid \rangle $ 上，给出两个可能的删除顺序。

### 解答
#### 关键概念
- 极大元：偏序集中无元素比其“大”（即无元素能被它整除，除自身外）的元素；
- 该算法本质是拓扑排序（将偏序扩张为全序），需保证原偏序中的整除关系在排序中体现为“先小后大”（即若 $ a \mid b $，则 $ a $ 在排序中位于 $ b $ 之前）。

#### 可能的删除顺序
1. 顺序一：先删除顶层极大元，再逐层向下：
$ 60 \to 36 \to 12 \to 6 \to 4 \to 3 \to 2 \to 7 $
- 步骤：
  - 初始极大元：60, 36（选 60 先删）；
  - 剩余集合极大元：36（删除）；
  - 剩余集合极大元：12（删除）；
  - 剩余集合极大元：6, 4（选 6 先删）；
  - 剩余集合极大元：4（删除）；
  - 剩余集合极大元：3（删除）；
  - 剩余集合极大元：2（删除）；
  - 最后删除 7。

2. 顺序二：调整同一层极大元的删除顺序：
$ 36 \to 60 \to 12 \to 4 \to 6 \to 2 \to 3 \to 7 $
- 步骤：
  - 初始极大元：60, 36（选 36 先删）；
  - 剩余集合极大元：60（删除）；
  - 剩余集合极大元：12（删除）；
  - 剩余集合极大元：6, 4（选 4 先删）；
  - 剩余集合极大元：6（删除）；
  - 剩余集合极大元：2（删除）；
  - 剩余集合极大元：3（删除）；
  - 最后删除 7。

### 说明
拓扑排序的核心是保持原偏序关系，同一层不可比的极大元删除顺序可灵活调整，因此存在多个合法序列。该算法可应用于任务调度、作业安排等场景，如按优先级或依赖关系确定执行顺序。

## T9
在一个软件开发项目中，需完成任务 $ T1 $（需求分析）、$ T2 $（设计文档）、$ T3 $（前端开发）、$ T4 $（后端开发）、$ T5 $（数据库设计）、$ T6 $（接口定义）、$ T7 $（前端测试）、$ T8 $（后端测试）、$ T9 $（集成测试）、$ T10 $（部署）。依赖关系为 $ R = \{(T1,T2),(T2,T3),(T2,T4),(T2,T5),(T3,T6),(T4,T6),(T3,T7),(T4,T8),(T6,T9),(T7,T9),(T8,T9),(T9,T10)\} $，其中 $ \langle x,y \rangle $ 表示 $ y $ 依赖 $ x $（先执行 $ x $ 再执行 $ y $）。

### 解答
1. **用哈斯图表示依赖关系**：
- 哈斯图规则：结点表示任务，若 $ x $ 是 $ y $ 的直接前驱（无中间任务），则用线段连接 $ x $（下方）和 $ y $（上方），省略传递边和自反边。
- 结构（从下到上）：
  - 底层：$ T1 $（无前置任务）；
  - 第二层：$ T2 $（仅依赖 $ T1 $）；
  - 第三层：$ T3, T4, T5 $（均依赖 $ T2 $，相互不可比）；
  - 第四层：$ T6, T7, T8 $（$ T6 $ 依赖 $ T3, T4 $；$ T7 $ 依赖 $ T3 $；$ T8 $ 依赖 $ T4 $）；
  - 第五层：$ T9 $（依赖 $ T6, T7, T8 $）；
  - 顶层：$ T10 $（依赖 $ T9 $）。

哈斯图图形：
```
        T10
         |
         T9
       / | \
      T6 T7 T8
     / \  |  |
    T3 T4 T3 T4
     \ /  |  |
      T2  |  |
       |  /  /
       T1
```
（简化表述：$ T1 \to T2 \to \{T3, T4, T5\} $；$ T3 \to \{T6, T7\} $，$ T4 \to \{T6, T8\} $；$ \{T6, T7, T8\} \to T9 \to T10 $）

2. **拓扑排序求解任务执行顺序（Kahn算法）**：
#### 算法步骤
- 初始化：计算每个任务的入度（前置任务数），入度为 0 的任务为初始极小元；
- 循环：选择入度为 0 的任务，加入排序序列，删除该任务及其所有出边（依赖它的任务入度减 1）；
- 终止：所有任务加入序列，排序完成。

#### 具体计算
- 任务入度：$ T1:0, T2:1, T3:1, T4:1, T5:1, T6:2, T7:1, T8:1, T9:3, T10:1 $
- 步骤 1：入度为 0 的任务是 $ T1 $，加入序列 $ [T1] $；删除 $ T1 $，$ T2 $ 入度变为 0；
- 步骤 2：入度为 0 的任务是 $ T2 $，加入序列 $ [T1, T2] $；删除 $ T2 $，$ T3, T4, T5 $ 入度变为 0；
- 步骤 3：入度为 0 的任务是 $ T3, T4, T5 $（选 $ T5 $），加入序列 $ [T1, T2, T5] $；删除 $ T5 $，无后续任务入度变化；
- 步骤 4：入度为 0 的任务是 $ T3, T4 $（选 $ T3 $），加入序列 $ [T1, T2, T5, T3] $；删除 $ T3 $，$ T6 $ 入度变为 1，$ T7 $ 入度变为 0；
- 步骤 5：入度为 0 的任务是 $ T7, T4 $（选 $ T7 $），加入序列 $ [T1, T2, T5, T3, T7] $；删除 $ T7 $，$ T9 $ 入度变为 2；
- 步骤 6：入度为 0 的任务是 $ T4 $，加入序列 $ [T1, T2, T5, T3, T7, T4] $；删除 $ T4 $，$ T6 $ 入度变为 0，$ T8 $ 入度变为 0；
- 步骤 7：入度为 0 的任务是 $ T6, T8 $（选 $ T6 $），加入序列 $ [T1, T2, T5, T3, T7, T4, T6] $；删除 $ T6 $，$ T9 $ 入度变为 1；
- 步骤 8：入度为 0 的任务是 $ T8 $，加入序列 $ [T1, T2, T5, T3, T7, T4, T6, T8] $；删除 $ T8 $，$ T9 $ 入度变为 0；
- 步骤 9：入度为 0 的任务是 $ T9 $，加入序列 $ [T1, T2, T5, T3, T7, T4, T6, T8, T9] $；删除 $ T9 $，$ T10 $ 入度变为 0；
- 步骤 10：加入 $ T10 $，最终序列 $ [T1, T2, T5, T3, T7, T4, T6, T8, T9, T10] $。

#### 另一个合法序列
调整步骤 3-8 中同入度任务的选择顺序，可得：$ [T1, T2, T3, T4, T5, T6, T7, T8, T9, T10] $（验证：满足所有依赖关系）。

## T10
现有一个 C++ 程序，源文件调用关系：$ P1 $ 调用 $ P2 $ 和 $ P3 $，$ P2 $ 调用 $ P3 $ 和 $ P4 $，$ P3 $ 调用 $ P5 $，$ P4 $ 调用 $ P6 $，$ P5 $ 调用 $ P6 $。基于关系理论分析依赖关系。

### 解答
1. **二元关系表示依赖关系 $ D $**：
定义序偶 $ \langle P_i, P_j \rangle $ 表示 $ P_i $ 调用 $ P_j $（$ P_j $ 依赖 $ P_i $），则：
$ D = \{\langle P1, P2 \rangle, \langle P1, P3 \rangle, \langle P2, P3 \rangle, \langle P2, P4 \rangle, \langle P3, P5 \rangle, \langle P4, P6 \rangle, \langle P5, P6 \rangle\} $

2. **求解传递闭包 $ t(D) $**：
传递闭包 $ t(D) = D \cup $ 所有满足传递性的新增序偶，计算如下：
- 由 $ \langle P1, P2 \rangle $ 和 $ \langle P2, P3 \rangle $ 得 $ \langle P1, P3 \rangle $（已在 $ D $ 中）；
- 由 $ \langle P1, P2 \rangle $ 和 $ \langle P2, P4 \rangle $ 得 $ \langle P1, P4 \rangle $；
- 由 $ \langle P1, P3 \rangle $ 和 $ \langle P3, P5 \rangle $ 得 $ \langle P1, P5 \rangle $；
- 由 $ \langle P1, P4 \rangle $ 和 $ \langle P4, P6 \rangle $ 得 $ \langle P1, P6 \rangle $；
- 由 $ \langle P2, P3 \rangle $ 和 $ \langle P3, P5 \rangle $ 得 $ \langle P2, P5 \rangle $；
- 由 $ \langle P2, P5 \rangle $ 和 $ \langle P5, P6 \rangle $ 得 $ \langle P2, P6 \rangle $；
- 由 $ \langle P3, P5 \rangle $ 和 $ \langle P5, P6 \rangle $ 得 $ \langle P3, P6 \rangle $；
- 其他传递组合无新增序偶。

最终 $ t(D) = \{\langle P1, P2 \rangle, \langle P1, P3 \rangle, \langle P2, P3 \rangle, \langle P2, P4 \rangle, \langle P3, P5 \rangle, \langle P4, P6 \rangle, \langle P5, P6 \rangle, \langle P1, P4 \rangle, \langle P1, P5 \rangle, \langle P1, P6 \rangle, \langle P2, P5 \rangle, \langle P2, P6 \rangle, \langle P3, P6 \rangle\} $

3. **基于 $ t(D) $ 的分析**：
- 循环调用判断：循环调用需存在 $ \langle P_i, P_i \rangle \in t(D) $（自环），但 $ t(D) $ 中无任何自环序偶，故**无循环调用**。
- $ P6 $ 被修改时的重编译文件：与 $ P6 $ 有依赖关系（即 $ t(D) $ 中所有以 $ P6 $ 为右元素的序偶的左元素），包括 $ P1, P2, P3, P4, P5 $，故需重编译的文件为 $ P1, P2, P3, P4, P5 $。

4. **哈斯图与编译顺序**：
- 哈斯图绘制：省略传递边和自反边，仅保留直接依赖关系，结构如下（从下到上）：
  ```
      P6
     / |
    P5 P4
     |  |
    P3  |
   / |  |
  P2 |  |
   \ |  |
    P1
  ```
  （说明：$ P1 $ 直接连接 $ P2, P3 $；$ P2 $ 直接连接 $ P3, P4 $；$ P3 $ 直接连接 $ P5 $；$ P4, P5 $ 直接连接 $ P6 $）

- 编译顺序：需满足依赖关系（被调用者后编译，调用者先编译），一个合法顺序为 $ P1 \to P2 \to P3 \to P4 \to P5 \to P6 $（或 $ P1 \to P3 \to P2 \to P5 \to P4 \to P6 $，$ P4 $ 与 $ P3, P5 $ 顺序可调整，支持并行编译）。

## T11 复杂软件项目依赖建模与调度优化
某自动驾驶系统开发项目包含 8 项核心任务 $ T = \{t1, t2, t3, t4, t5, t6, t7, t8\} $，直接依赖关系 $ D = \{\langle t1, t2 \rangle, \langle t1, t3 \rangle, \langle t2, t4 \rangle, \langle t3, t4 \rangle, \langle t4, t5 \rangle, \langle t4, t6 \rangle, \langle t5, t7 \rangle, \langle t6, t7 \rangle, \langle t3, t8 \rangle, \langle t8, t6 \rangle\} $（$ \langle x,y \rangle $ 表示 $ x $ 必须在 $ y $ 之前完成），任务耗时（天）：$ t1:2, t2:3, t3:4, t4:5, t5:2, t6:3, t7:4, t8:2 $。

### 解答
1. **验证偏序关系并绘制哈斯图**：
- 自反传递闭包 $ \leq $ 的定义：$ \langle x,y \rangle \in \leq \iff x = y $ 或 $ x $ 可通过 $ D $ 中的关系传递到 $ y $。
- 偏序验证：
  - 自反性：对任意 $ ti \in T $，$ ti \leq ti $，满足；
  - 反对称性：假设 $ ti \leq tj $ 且 $ tj \leq ti $（$ ti \neq tj $），则存在循环依赖，但 $ D $ 中无循环（如 $ t1 \to t2 \to t4 \to \dots $，无反向路径），故 $ ti = tj $，满足；
  - 传递性：由闭包定义，若 $ ti \leq tj $ 且 $ tj \leq tk $，则 $ ti \leq tk $，满足。

- 哈斯图绘制：省略自反边和传递边，保留直接依赖关系，结构如下（从下到上）：
  ```
        t7
       /  \
      t5   t6
      |   / \
      t4  t8  |
     / \  |   |
    t2  t3  |
     \ /    |
      t1    |
            |
  ```
  （说明：$ t1 $ 直接连接 $ t2, t3 $；$ t2 $ 直接连接 $ t4 $；$ t3 $ 直接连接 $ t4, t8 $；$ t4 $ 直接连接 $ t5, t6 $；$ t8 $ 直接连接 $ t6 $；$ t5, t6 $ 直接连接 $ t7 $）

2. **误加依赖 $ \langle t7, t1 \rangle $ 的影响**：
- 破坏的偏序性质：反对称性。原闭包中 $ t1 \leq t7 $（$ t1 \to t2 \to t4 \to t5 \to t7 $ 或 $ t1 \to t3 \to t4 \to t6 \to t7 $），误加 $ \langle t7, t1 \rangle $ 后 $ t7 \leq t1 $，但 $ t1 \neq t7 $，违反反对称性。
- 工程后果：形成循环依赖 $ t1 \to t3 \to t4 \to t6 \to t7 \to t1 $，导致构建系统死锁或无限等待，无法确定任务执行顺序，项目无法推进。

3. **Kahn拓扑排序生成合法序列**：
#### Kahn算法步骤
- 计算入度：$ t1:0, t2:1, t3:1, t4:2, t5:1, t6:2, t7:2, t8:1 $
- 步骤 1：选择入度为 0 的 $ t1 $，加入序列，删除 $ t1 $，$ t2, t3 $ 入度变为 0；
- 步骤 2：选择 $ t2 $（或 $ t3 $），加入序列，删除 $ t2 $，$ t4 $ 入度变为 1；
- 步骤 3：选择 $ t3 $，加入序列，删除 $ t3 $，$ t4 $ 入度变为 0，$ t8 $ 入度变为 0；
- 步骤 4：选择 $ t4 $（或 $ t8 $），加入序列，删除 $ t4 $，$ t5, t6 $ 入度变为 1；
- 步骤 5：选择 $ t8 $，加入序列，删除 $ t8 $，$ t6 $ 入度变为 0；
- 步骤 6：选择 $ t5 $（或 $ t6 $），加入序列，删除 $ t5 $，$ t7 $ 入度变为 1；
- 步骤 7：选择 $ t6 $，加入序列，删除 $ t6 $，$ t7 $ 入度变为 0；
- 步骤 8：选择 $ t7 $，加入序列。

最终合法序列：$ t1 \to t2 \to t3 \to t4 \to t8 \to t5 \to t6 \to t7 $（$ t2/t3 $、$ t4/t8 $、$ t5/t6 $ 顺序可交换）。

4. **关键路径与关键任务分析**：
#### 所有路径及总耗时（从 $ t1 $ 到 $ t7 $）
- 路径 1：$ t1 \to t2 \to t4 \to t5 \to t7 $，耗时 $ 2+3+5+2+4=16 $ 天；
- 路径 2：$ t1 \to t2 \to t4 \to t6 \to t7 $，耗时 $ 2+3+5+3+4=17 $ 天；
- 路径 3：$ t1 \to t3 \to t4 \to t5 \to t7 $，耗时 $ 2+4+5+2+4=17 $ 天；
- 路径 4：$ t1 \to t3 \to t4 \to t6 \to t7 $，耗时 $ 2+4+5+3+4=18 $ 天；
- 路径 5：$ t1 \to t3 \to t8 \to t6 \to t7 $，耗时 $ 2+4+2+3+4=15 $ 天。

#### 关键路径与关键任务
- 关键路径：总耗时最长的路径 $ t1 \to t3 \to t4 \to t6 \to t7 $（18 天），决定项目最短工期；
- 关键任务：关键路径上的任务 $ t1, t3, t4, t6, t7 $（这些任务无浮动时间，延误将导致项目延期；非关键任务 $ t2, t5, t8 $ 有浮动时间，可灵活安排）。